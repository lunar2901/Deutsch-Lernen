<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Deutsch Fokus</title>
    <style>
        :root {
            --ios-blue: #007AFF;
            --ios-bg: #FFFFFF;
            --card-inner: #F2F2F7;
            --text-main: #1C1C1E;
            --text-sec: #636366;
            --der: #007AFF;
            --die: #FF2D55;
            --das: #5856D6;
        }

        body {
            font-family: -apple-system, system-ui, sans-serif;
            background-color: var(--ios-bg);
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        /* Top Header Area */
        header {
            padding: 40px 20px 10px;
            text-align: center;
        }

        .search-bar {
            width: 90%;
            padding: 10px;
            border-radius: 10px;
            border: none;
            background: #E3E3E8;
            font-size: 16px;
            outline: none;
        }

        /* Main Focused Page Area */
        #pageContainer {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .focused-card {
            width: 100%;
            max-width: 400px;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .main-word {
            font-size: 42px;
            font-weight: 800;
            margin-bottom: 5px;
            display: block;
        }

        .category-tag {
            font-size: 14px;
            color: var(--text-sec);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 20px;
            display: block;
        }

        .info-section {
            background: var(--card-inner);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .definition { font-size: 20px; font-weight: 600; margin-bottom: 10px; color: #000; }
        .example { font-style: italic; color: #444; border-left: 3px solid var(--ios-blue); padding-left: 10px; margin: 10px 0; }

        /* Variation List */
        .variations-title { font-weight: 700; margin-top: 20px; font-size: 18px; color: var(--ios-blue); }
        .var-item {
            margin-top: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #DDD;
        }
        .var-form { font-weight: 700; background: var(--ios-blue); color: white; padding: 2px 6px; border-radius: 5px; margin-right: 5px; }

        /* Navigation Footer */
        nav {
            padding: 20px;
            display: flex;
            justify-content: space-between;
            border-top: 1px solid #EEE;
            background: #FAFAFA;
        }

        button {
            background: var(--ios-blue);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }

        button:disabled { background: #CCC; }

        /* Genders */
        .der { color: var(--der); }
        .die { color: var(--die); }
        .das { color: var(--das); }
    </style>
</head>
<body>

<header>
    <input type="text" id="searchInput" class="search-bar" placeholder="Suchen...">
</header>

<div id="pageContainer">
    </div>

<nav>
    <button id="prevBtn" onclick="changePage(-1)">Zurück</button>
    <span id="counter" style="align-self: center; color: var(--text-sec);">0 / 0</span>
    <button id="nextBtn" onclick="changePage(1)">Weiter</button>
</nav>

<script>
    let vocabData = [];
    let currentIndex = 0;

    async function loadVocab() {
        try {
            const response = await fetch('german-vocab-1000.json');
            vocabData = await response.json();
            renderPage();
        } catch (e) {
            document.getElementById('pageContainer').innerHTML = "Fehler beim Laden.";
        }
    }

    function renderPage() {
        const container = document.getElementById('pageContainer');
        const item = vocabData[currentIndex];
        const counter = document.getElementById('counter');

        counter.innerText = `${currentIndex + 1} / ${vocabData.length}`;
        
        let articleClass = item.article ? item.article.toLowerCase() : "";

        container.innerHTML = `
            <div class="focused-card">
                <span class="category-tag">${item.category || item.type}</span>
                <span class="main-word ${articleClass}">${item.article ? item.article + ' ' : ''}${item.word}</span>
                <div style="margin-bottom: 20px; color: var(--text-sec); font-style: italic;">
                    ${item.conjugation || ''} ${item.plural ? ' | Plural: ' + item.plural : ''}
                </div>

                <div class="info-section">
                    <div class="definition">${item.meanings[0].definition}</div>
                    <div class="example">
                        "${item.meanings[0].examples[0]?.de || ''}"<br>
                        <small style="color: #888;">${item.meanings[0].examples[0]?.en || ''}</small>
                    </div>
                </div>

                ${item.variations && item.variations.length > 0 ? `
                    <div class="variations-title">Variationen & Präfixe</div>
                    <div style="max-height: 250px; overflow-y: auto;">
                        ${item.variations.map(v => `
                            <div class="var-item">
                                <span class="var-form">${v.form}</span> <strong>${v.meaning}</strong>
                                <div style="font-size: 13px; color: #666; margin-top:5px;">
                                    Z.B.: Ein Wort mit vielen Möglichkeiten.
                                </div>
                            </div>
                        `).join('')}
                    </div>
                ` : ''}
            </div>
        `;

        document.getElementById('prevBtn').disabled = currentIndex === 0;
        document.getElementById('nextBtn').disabled = currentIndex === vocabData.length - 1;
    }

    function changePage(step) {
        currentIndex += step;
        renderPage();
    }

    // Direct Search Logic
    document.getElementById('searchInput').addEventListener('keypress', function (e) {
        if (e.key === 'Enter') {
            const val = this.value.toLowerCase();
            const foundIndex = vocabData.findIndex(i => i.word.toLowerCase() === val);
            if (foundIndex !== -1) {
                currentIndex = foundIndex;
                renderPage();
                this.value = "";
                this.blur();
            }
        }
    });

    loadVocab();
</script>

</body>
</html>
